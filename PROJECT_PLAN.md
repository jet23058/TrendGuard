# TrendGuard 專案計劃書

## 1. 專案概述 (Project Overview)
**TrendGuard** 是一個專注於**台股動能交易**與**強勢股篩選**的自動化分析平台。核心理念基於傑西·利弗摩爾 (Jesse Livermore) 的突破策略，結合現代技術指標 (KD, MA, Volume)，旨在幫助交易者快速識別市場中的強勢標的，並提供風險控管輔助。

### 核心價值
*   **自動化**：每日盤後自動執行掃描，無需人工介入。
*   **數據驅動**：基於客觀的技術指標與市場廣度統計，減少情緒干擾。
*   **風險意識**：整合「禁當沖」、「處置股」警示與停損點位計算。
*   **高效視覺化**：專為交易者設計的儀表板，提供即時、清晰的圖表與信號。

---

## 2. 系統架構 (System Architecture)

專案採用 **前後端分離** 架構，並高度依賴 **Serverless** 與 **CI/CD** 自動化。

### 2.1 資料處理層 (Data Pipeline)
*   **執行環境**: GitHub Actions (每日排程)。
*   **核心腳本**: `scripts/update_daily.py` (Python)。
*   **資料來源**: 
    *   `yfinance`: 取得 OHLC 歷史股價。
    *   `TWSE/TPEX 官網`: 取得最新「當日沖銷交易標的」與「市場警示/處置」清單。
*   **資料產出**: 生成靜態 JSON 檔案 (`daily_scan_results.json`)，包含篩選結果與完整技術指標。

### 2.2 前端應用層 (Frontend Application)
*   **框架**: React 18 + Vite。
*   **UI 系統**: Tailwind CSS + Lucide Icons。
*   **圖表引擎**: Recharts (支援 K線圖、均線、KD指標、成交量)。
*   **狀態管理**: React Hooks (包含效能優化的 Lazy Loading)。
*   **資料同步**: 直接讀取生成的 JSON 資料，並整合 Firebase (用於庫存同步)。

### 2.3 部署 (Deployment)
*   **Frontend**: 託管於 Vercel / GitHub Pages。
*   **Backend API**: Vercel Serverless Functions (Python) 用於處理即時性請求 (如庫存即時報價)。

---

## 3. 核心功能現況 (Current Features)

### ✅ 策略篩選
*   **利弗摩爾突破**: 篩選創 20 日新高且動能強勁的股票。
*   **均線多頭排列**: 確保股價位於 MA5 > MA10 > MA20 > MA60 之上。
*   **動能過濾**: 支援「連續收紅天數」篩選與「強勢股 (>5%)」過濾。

### ✅ 風險控管
*   **市場警示標籤**: 自動標記「處置股」、「注意股」。
*   **交易限制檢查**: 自動比對證交所清單，標記「🚫 禁當沖」股票。
*   **停損建議**: 依據技術面自動計算建議停損價位。

### ✅ 視覺化儀表板
*   **互動式 K 線圖**: 支援滑鼠互動查價、切換 MA/KD 指標。
*   **效能優化**: 實作圖表 Lazy Rendering (延遲渲染)，大幅提升列表滑動流暢度。
*   **RWD 響應式設計**: 完美支援手機與桌面版瀏覽。

### ✅ 投資組合追蹤
*   **庫存管理**: 支援手動輸入或 OCR 匯入庫存。
*   **未實現損益**: 即時計算庫存損益與趴數。

---

## 4. 開發藍圖 (Roadmap)

### 階段一：效能與穩定性優化 (進行中 🟡)
- [x] **圖表效能優化**: 實作 IntersectionObserver 延遲載入圖表。
- [x] **資料精確度**: 串接證交所 API 獲取精確的「可當沖」清單。
- [ ] **資料瘦身**: 優化 JSON 結構，減少歷史數據傳輸量 (目前傳輸 60 天，前端僅需顯示部分)。
- [ ] **錯誤處理**: 強化後端爬蟲對偶發性連線錯誤的重試機制。

### 階段二：使用者體驗與個人化 (短期目標)
- [ ] **自訂篩選條件**: 讓使用者在前端調整篩選參數 (如：成交量門檻、漲幅限制)。
- [ ] **多策略切換**: 新增「乖離率過大」、「布林通道壓縮」等其他策略模式。
- [ ] **深色/淺色模式切換**: 提供更完整的主題切換功能。

### 階段三：進階分析與 AI 整合 (中期目標)
- [ ] **AI 盤勢解讀**: 修復並整合 Google Gemini API，每日自動生成大盤與個股分析文章。
- [ ] **回測系統**: 簡單的策略回測功能，驗證篩選邏輯的歷史績效。
- [ ] **社群推播**: 整合 Line Notify 或 Telegram Bot，盤後自動推播今日強勢股。

### 階段四：平台化與社群 (長期願景)
- [ ] **使用者帳戶系統**: 完整的 Firebase Auth 整合，儲存個人化設定與追蹤清單。
- [ ] **分享功能**: 生成股票分析卡片圖片，方便社群分享。

---

## 5. 技術堆疊 (Tech Stack)

| 領域 | 技術/工具 | 用途 |
| --- | --- | --- |
| **Language** | Python 3.9+ | 資料爬取、策略運算、後端邏輯 |
| **Language** | JavaScript (ES6+) | 前端互動邏輯 |
| **Framework** | React 18 (Vite) | 使用者介面建構 |
| **Styling** | Tailwind CSS | UI 樣式設計 |
| **Charts** | Recharts | 股票 K 線圖與技術指標繪製 |
| **Data Source** | yfinance, TWSE API | 金融數據來源 |
| **Automation** | GitHub Actions | 每日排程自動化 |
| **Hosting** | Vercel | 網站託管與 Serverless API |

---

*Last Updated: 2026-01-24*
